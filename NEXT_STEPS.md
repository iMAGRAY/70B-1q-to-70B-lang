# Дальнейшие шаги по разработке SIGLA

Этот документ описывает последовательность задач, которые предстоит выполнить после текущей стадии. Он ориентирован на практическую реализацию и тестирование основных функций проекта.

## 1. Подготовка и тестовый набор капсул
1. Сформировать небольшой набор вопросов (15–20 штук) по ключевым темам.
2. Получить на них ответы из модели 70B (или её аналога) и разрезать ответы на отдельные капсулы.
3. Отфильтровать личные данные и сохранить капсулы в формате JSON/NDJSON.
4. Проверить корректность эмбеддингов через `python -m sigla embed`.

## 2. Создание индекса и базовая проверка
1. Создать FAISS‑индекс командой `python -m sigla ingest data.json my_index --model sentence-transformers/all-MiniLM-L6-v2`.
2. Убедиться, что индекс успешно загружается командой `python -m sigla info my_index`.
3. Попробовать выполнить поиск по нескольким запросам и оценить релевантность результатов.

## 3. Тестирование сервера
1. Запустить сервер: `python -m sigla server --index my_index`.
2. Выполнить запросы через `curl` к `/search`, `/ask`, `/walk` и другим эндпоинтам.
3. Проверить логирование запросов (параметр `--log-file`).

## 4. Интеграция с моделью 1Q
1. Настроить локальный LLM через `llama-cpp` или другую библиотеку, убедиться, что `sigla.llm.LocalLLM` работает.
2. Через команду `python -m sigla answer` протестировать генерацию ответа с учётом найденных капсул.
3. Оценить качество и при необходимости скорректировать параметры (`top_k`, `temperature`, `min_rating`).

## 5. Расширение функциональности
1. Реализовать обработку графа капсул (автосвязи, `walk` с алгоритмом random walk) на реальном наборе данных.
2. Добавить в README краткую инструкцию по настройке локального LLM и приведению примеров с KV‑кешем (если будет реализован).
3. Продумать упрощённый процесс обновления индекса (CLI `update`, эндпоинт `/update`).

## 6. Тестирование и отладка
1. Использовать `sigla stats` для анализа логов и выявления медленных мест.
2. Создать скрипты автоматического тестирования основных команд (ingest, search, answer).
3. Проверять, что все команды работают без необязательных зависимостей (с хеш‑моделью) и с ними (sentence-transformers, faiss).

## 7. Итог
После прохождения всех этапов будет готов минимальный прототип SIGLA, способный хранить капсулы знаний, извлекать их по запросу и подсказывать 1Q релевантные факты. Далее можно расширять функциональность, оптимизировать скорость работы и наращивать базу знаний.
